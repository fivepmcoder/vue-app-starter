<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href="/vite.svg" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>%VITE_APP_TITLE%</title>
        <style>
            :root {
                --bg-color: #ffffff;
                --text-color: #1a1b1c;
            }
            [data-theme="dark"] {
                --bg-color: #000000;
                --text-color: #fafbfc;
            }
            html,
            body,
            #app {
                background-color: var(--bg-color);
                color: var(--text-color);
                margin: 0;
                min-height: 100vh;
            }
        </style>

        <!-- 立即执行的主题脚本，防止闪烁 -->
        <script>
            (function () {
                try {
                    const stored = localStorage.getItem("theme");

                    if (stored) {
                        const themeData = JSON.parse(stored);
                        const themeName = themeData.name || "light";
                        document.documentElement.setAttribute("data-theme", themeName);
                    } else {
                        // 没有保存的主题，检测系统偏好
                        const prefersDark = window.matchMedia(
                            "(prefers-color-scheme: dark)"
                        ).matches;
                        document.documentElement.setAttribute(
                            "data-theme",
                            prefersDark ? "dark" : "light"
                        );
                    }
                } catch (e) {
                    document.documentElement.setAttribute("data-theme", "light");
                }
            })();
        </script>
    </head>
    <body>
        <div id="app" data-theme="light"></div>
        <script type="module" src="/src/main.ts"></script>
    </body>
</html>
